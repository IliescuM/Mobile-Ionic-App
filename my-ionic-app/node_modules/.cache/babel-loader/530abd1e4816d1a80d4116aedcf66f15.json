{"ast":null,"code":"import _objectSpread from\"G:\\\\Mihnea\\\\Facultate\\\\anu 3\\\\Mobile\\\\start\\\\my-ionic-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"G:\\\\Mihnea\\\\Facultate\\\\anu 3\\\\Mobile\\\\start\\\\my-ionic-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from'react';import{IonButton,IonButtons,IonContent,IonHeader,IonInput,IonItem,IonLabel,IonPage,IonSelect,IonSelectOption,IonTitle,IonToolbar,IonCardContent,IonCard,IonCardHeader,IonCardTitle}from'@ionic/react';import{getLogger}from'../core';import{ItemContext}from'./ItemProvider';var log=getLogger('ItemEdit');var ItemEdit=function ItemEdit(_ref){var history=_ref.history,match=_ref.match;var _useContext=useContext(ItemContext),items=_useContext.items,saving=_useContext.saving,savingError=_useContext.savingError,saveItem=_useContext.saveItem;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState('2021-11-10'),_useState4=_slicedToArray(_useState3,2),date=_useState4[0],setDate=_useState4[1];var _useState5=useState(\"0\"),_useState6=_slicedToArray(_useState5,2),num=_useState6[0],setNum=_useState6[1];var _useState7=useState(\"true\"),_useState8=_slicedToArray(_useState7,2),bool=_useState8[0],setBool=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),item=_useState10[0],setItem=_useState10[1];useEffect(function(){log('useEffect');var routeId=match.params.id||'';var item=items===null||items===void 0?void 0:items.find(function(it){return it.id===routeId;});setItem(item);if(item){setText(item.text);setDate(item.date);setNum(item.num);setBool(item.bool);}},[match.params.id,items]);var handleSave=function handleSave(){//const editedItem = item ? { ...item, text } : { text };\nvar editedItem=item?_objectSpread(_objectSpread({},item),{},{text:text,date:date,num:num,bool:bool}):{text:text,date:date,num:num,bool:bool};saveItem&&saveItem(editedItem).then(function(){return history.goBack();});};log('render');return/*#__PURE__*/React.createElement(IonPage,null,/*#__PURE__*/React.createElement(IonHeader,null,/*#__PURE__*/React.createElement(IonToolbar,null,/*#__PURE__*/React.createElement(IonTitle,null,\"Edit Item\"),/*#__PURE__*/React.createElement(IonButtons,{slot:\"end\"},/*#__PURE__*/React.createElement(IonButton,{onClick:function onClick(){return history.goBack();}},\"Back\"),/*#__PURE__*/React.createElement(IonButton,{onClick:handleSave},\"Save\")))),/*#__PURE__*/React.createElement(IonContent,null,/*#__PURE__*/React.createElement(IonCard,null,/*#__PURE__*/React.createElement(IonCardHeader,null,/*#__PURE__*/React.createElement(IonCardTitle,null,\"Edit class\")),/*#__PURE__*/React.createElement(IonCardContent,null,/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonLabel,null,\"ID:  \"),/*#__PURE__*/React.createElement(IonInput,{hidden:item===undefined,placeholder:\"id\",value:match.params.id,readonly:true})),/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonLabel,null,\"Date\"),/*#__PURE__*/React.createElement(IonContent,{class:\"ion-text-right\"}),/*#__PURE__*/React.createElement(IonSelect,{placeholder:\"Select date\",value:date,onIonChange:function onIonChange(e){return setDate(e.detail.value||'');}},/*#__PURE__*/React.createElement(IonSelectOption,{value:\"2021-11-10\"},\"2021-11-10\"),/*#__PURE__*/React.createElement(IonSelectOption,{value:\"2021-12-10\"},\"2021-12-10\")),savingError&&/*#__PURE__*/React.createElement(\"div\",null,savingError.message||'Failed to save class')),/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonLabel,null,\"Num\"),/*#__PURE__*/React.createElement(IonContent,{class:\"ion-text-right\"}),/*#__PURE__*/React.createElement(IonInput,{placeholder:\"Set num\",value:num,onIonChange:function onIonChange(e){return setNum(e.detail.value||'');}}),savingError&&/*#__PURE__*/React.createElement(\"div\",null,savingError.message||'Failed to save class')),/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonLabel,null,\"Bool\"),/*#__PURE__*/React.createElement(IonContent,{class:\"ion-text-right\"}),/*#__PURE__*/React.createElement(IonSelect,{placeholder:\"Select bool\",value:bool,onIonChange:function onIonChange(e){return setBool(e.detail.value||'');}},/*#__PURE__*/React.createElement(IonSelectOption,{value:\"True\"},\"True\"),/*#__PURE__*/React.createElement(IonSelectOption,{value:\"False\"},\"False\")),savingError&&/*#__PURE__*/React.createElement(\"div\",null,savingError.message||'Failed to save class'))))));};export default ItemEdit;","map":{"version":3,"sources":["G:/Mihnea/Facultate/anu 3/Mobile/start/my-ionic-app/src/class/ItemEdit.tsx"],"names":["React","useContext","useEffect","useState","IonButton","IonButtons","IonContent","IonHeader","IonInput","IonItem","IonLabel","IonPage","IonSelect","IonSelectOption","IonTitle","IonToolbar","IonCardContent","IonCard","IonCardHeader","IonCardTitle","getLogger","ItemContext","log","ItemEdit","history","match","items","saving","savingError","saveItem","text","setText","date","setDate","num","setNum","bool","setBool","item","setItem","routeId","params","id","find","it","handleSave","editedItem","then","goBack","undefined","e","detail","value","message"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\n\r\nimport {\r\n  IonButton,\r\n  IonButtons,\r\n  IonContent,\r\n  IonHeader,\r\n  IonInput, IonItem, IonLabel,\r\n  IonLoading,\r\n  IonPage, IonSelect, IonSelectOption,\r\n  IonTitle,\r\n  IonToolbar, IonCardContent, IonFab, IonCard,IonCardHeader,IonCardTitle\r\n} from '@ionic/react';\r\nimport { getLogger } from '../core';\r\nimport { ItemContext } from './ItemProvider';\r\nimport { RouteComponentProps } from 'react-router';\r\nimport { ItemProps } from './ItemProps';\r\n\r\nconst log = getLogger('ItemEdit');\r\n\r\ninterface ItemEditProps extends RouteComponentProps<{\r\n  id?: string;\r\n\r\n}> { }\r\n\r\nconst ItemEdit: React.FC<ItemEditProps> = ({ history, match }) => {\r\n  const { items, saving, savingError, saveItem } = useContext(ItemContext);\r\n  const [text, setText] = useState('');\r\n  const [date, setDate] = useState('2021-11-10');\r\n  const [num,setNum] = useState(\"0\");\r\n  const [bool,setBool] = useState(\"true\");\r\n  const [item, setItem] = useState<ItemProps>();\r\n  useEffect(() => {\r\n    log('useEffect');\r\n    const routeId = match.params.id || '';\r\n    const item = items?.find(it => it.id === routeId);\r\n    setItem(item);\r\n    if (item) {\r\n      setText(item.text);\r\n      setDate(item.date);\r\n      setNum(item.num);\r\n      setBool(item.bool);\r\n    }\r\n  }, [match.params.id, items]);\r\n  const handleSave = () => {\r\n    //const editedItem = item ? { ...item, text } : { text };\r\n    const editedItem = item ? {...item,text,date:date,num:num,bool:bool}:{text,date:date,num:num,bool:bool}\r\n    saveItem && saveItem(editedItem).then(() => history.goBack());\r\n  };\r\n  log('render');\r\n  return (\r\n    <IonPage>\r\n      <IonHeader>\r\n        <IonToolbar>\r\n          <IonTitle>Edit Item</IonTitle>\r\n          <IonButtons slot=\"end\">\r\n            <IonButton onClick={() => history.goBack()} >\r\n              Back\r\n            </IonButton>\r\n            <IonButton onClick={handleSave}>\r\n              Save\r\n            </IonButton>\r\n          </IonButtons>\r\n        </IonToolbar>\r\n      </IonHeader>\r\n\r\n      <IonContent>\r\n        <IonCard>\r\n          <IonCardHeader >\r\n            <IonCardTitle>Edit class</IonCardTitle>\r\n          </IonCardHeader>\r\n      <IonCardContent>\r\n        <IonItem>\r\n          <IonLabel>ID:  </IonLabel>\r\n          <IonInput hidden={item === undefined}  placeholder=\"id\" value={match.params.id} readonly/>\r\n        </IonItem>\r\n      <IonItem>\r\n      <IonLabel>Date</IonLabel>\r\n        <IonContent class='ion-text-right'/>\r\n        <IonSelect  placeholder = \"Select date\" value={date} onIonChange = {e => setDate(e.detail.value || '')} >\r\n          <IonSelectOption value = \"2021-11-10\">2021-11-10</IonSelectOption>\r\n          <IonSelectOption value = \"2021-12-10\">2021-12-10</IonSelectOption>\r\n        </IonSelect>\r\n        {\r\n          savingError && (\r\n              <div>{savingError.message || 'Failed to save class'}</div>\r\n          )\r\n        }\r\n      </IonItem>\r\n        <IonItem>\r\n          <IonLabel>Num</IonLabel>\r\n          <IonContent class='ion-text-right'/>\r\n          <IonInput placeholder=\"Set num\" value={num} onIonChange={e => setNum(e.detail.value || '')} >\r\n          </IonInput>\r\n            {\r\n              savingError && (\r\n                  <div>{savingError.message || 'Failed to save class'}</div>\r\n              )\r\n            }\r\n\r\n\r\n        </IonItem>\r\n        <IonItem>\r\n          <IonLabel>Bool</IonLabel>\r\n          <IonContent class='ion-text-right'/>\r\n          <IonSelect  placeholder = \"Select bool\" value={bool} onIonChange = {e => setBool(e.detail.value || '')} >\r\n            <IonSelectOption value = \"True\">True</IonSelectOption>\r\n            <IonSelectOption value = \"False\">False</IonSelectOption>\r\n          </IonSelect>\r\n          {\r\n            savingError && (\r\n                <div>{savingError.message || 'Failed to save class'}</div>\r\n            )\r\n          }\r\n\r\n        </IonItem>\r\n      </IonCardContent>\r\n        </IonCard>\r\n      </IonContent>\r\n    </IonPage>\r\n  );\r\n};\r\n\r\nexport default ItemEdit;\r\n"]},"metadata":{},"sourceType":"module"}