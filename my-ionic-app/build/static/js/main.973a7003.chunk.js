(this.webpackJsonpmyApp=this.webpackJsonpmyApp||[]).push([[1],{105:function(e,t,n){},106:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(30),o=n.n(c),i=n(22),l=n(2),s=n(61),u=n(13),m=function(e){var t=e.id,n=e.text,a=e.date,c=e.num,o=e.bool,i=e.onEdit;return r.a.createElement(l.d,{onClick:function(){return i(t)}},r.a.createElement(l.f,null,r.a.createElement(l.g,null,n)),r.a.createElement(l.e,null,r.a.createElement(l.n,null,r.a.createElement(l.o,null,"Date: ",a)),r.a.createElement(l.n,null,r.a.createElement(l.o,null,"Num: ",c)),r.a.createElement(l.n,null,r.a.createElement(l.o,null,"Bool: ",o))))},E=function(e){return function(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=console).log.apply(t,[e].concat(a))}},d=n(10),f=n.n(d),p=n(15),v=n(23),j=n(37),h=n(14),y=n(38),b=n.n(y),g=E("itemApi"),_="http://".concat("localhost:3000","/item");function O(e,t){return g("".concat(t," - started")),e.then((function(e){return g("".concat(t," - succeeded")),Promise.resolve(e.data)})).catch((function(e){return g("".concat(t," - failed")),Promise.reject(e)}))}var I={headers:{"Content-Type":"application/json"}},S=function(){return O(b.a.get(_,I),"getItems")},x=function(e){return O(b.a.post(_,e,I),"createItem")},T=function(e){return O(b.a.put("".concat(_,"/").concat(e.id),e,I),"updateItem")},k=E("ItemProvider"),w={fetching:!1,saving:!1},C=function(e,t){var n=t.type,a=t.payload;switch(n){case"FETCH_ITEMS_STARTED":return Object(h.a)(Object(h.a)({},e),{},{fetching:!0,fetchingError:null});case"FETCH_ITEMS_SUCCEEDED":return Object(h.a)(Object(h.a)({},e),{},{items:a.items,fetching:!1});case"FETCH_ITEMS_FAILED":return Object(h.a)(Object(h.a)({},e),{},{fetchingError:a.error,fetching:!1});case"SAVE_ITEM_STARTED":return Object(h.a)(Object(h.a)({},e),{},{savingError:null,saving:!0});case"SAVE_ITEM_SUCCEEDED":var r=Object(j.a)(e.items||[]),c=a.item,o=r.findIndex((function(e){return e.id===c.id}));return-1===o?r.splice(0,0,c):r[o]=c,Object(h.a)(Object(h.a)({},e),{},{items:r,saving:!1});case"SAVE_ITEM_FAILED":return Object(h.a)(Object(h.a)({},e),{},{savingError:a.error,saving:!1});default:return e}},D=r.a.createContext(w),A=function(e){var t=e.children,n=Object(a.useReducer)(C,w),c=Object(v.a)(n,2),o=c[0],i=c[1],l=o.items,s=o.fetching,u=o.fetchingError,m=o.saving,E=o.savingError;Object(a.useEffect)((function(){var e=!1;return function(){t.apply(this,arguments)}(),function(){e=!0};function t(){return(t=Object(p.a)(f.a.mark((function t(){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,k("fetchItems started"),i({type:"FETCH_ITEMS_STARTED"}),t.next=5,S();case 5:n=t.sent,k("fetchItems succeeded"),e||i({type:"FETCH_ITEMS_SUCCEEDED",payload:{items:n}}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),k("fetchItems failed"),i({type:"FETCH_ITEMS_FAILED",payload:{error:t.t0}});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})))).apply(this,arguments)}}),[]),Object(a.useEffect)((function(){var e=!1;k("wsEffect - connecting");var t=function(e){var t=new WebSocket("ws://".concat("localhost:3000"));return t.onopen=function(){g("web socket onopen")},t.onclose=function(){g("web socket onclose")},t.onerror=function(e){g("web socket onerror",e)},t.onmessage=function(t){g("web socket onmessage"),e(JSON.parse(t.data))},function(){t.close()}}((function(t){if(!e){var n=t.event,a=t.payload.item;k("ws message, item ".concat(n)),"created"!==n&&"updated"!==n||i({type:"SAVE_ITEM_SUCCEEDED",payload:{item:a}})}}));return function(){k("wsEffect - disconnecting"),e=!0,t()}}),[]);var d={items:l,fetching:s,fetchingError:u,saving:m,savingError:E,saveItem:Object(a.useCallback)((function(e){return j.apply(this,arguments)}),[])};return k("returns"),r.a.createElement(D.Provider,{value:d},t);function j(){return(j=Object(p.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k("saveItem started"),i({type:"SAVE_ITEM_STARTED"}),e.next=5,t.id?T(t):x(t);case 5:n=e.sent,k("saveItem succeeded"),i({type:"SAVE_ITEM_SUCCEEDED",payload:{item:n}}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),k("saveItem failed"),i({type:"SAVE_ITEM_FAILED",payload:{error:e.t0}});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}},F=E("ItemList"),M=function(e){var t=e.history,n=Object(a.useContext)(D),c=n.items,o=n.fetching,i=n.fetchingError;return F("render"),r.a.createElement(l.r,null,r.a.createElement(l.k,null,r.a.createElement(l.x,null,r.a.createElement(l.w,null,"My App"))),r.a.createElement(l.h,null,r.a.createElement(l.q,{isOpen:o,message:"Fetching items, please wait"}),c&&r.a.createElement(l.p,null,c.map((function(e){var n=e.id,a=e.text,c=e.date,o=e.num,i=e.bool;return r.a.createElement(m,{key:n,id:n,text:a,date:c,num:o,bool:i,onEdit:function(e){return t.push("/item/".concat(e))}})}))),i&&r.a.createElement("div",null,i.message||"Failed to fetch items"),r.a.createElement(l.i,{vertical:"bottom",horizontal:"end",slot:"fixed"},r.a.createElement(l.j,{onClick:function(){return t.push("/item")}},r.a.createElement(l.l,{icon:u.a})))))},U=E("ItemEdit"),B=function(e){var t=e.history,n=e.match,c=Object(a.useContext)(D),o=c.items,i=(c.saving,c.savingError),s=c.saveItem,u=Object(a.useState)(""),m=Object(v.a)(u,2),E=m[0],d=m[1],f=Object(a.useState)("2021-11-10"),p=Object(v.a)(f,2),j=p[0],y=p[1],b=Object(a.useState)("0"),g=Object(v.a)(b,2),_=g[0],O=g[1],I=Object(a.useState)("true"),S=Object(v.a)(I,2),x=S[0],T=S[1],k=Object(a.useState)(),w=Object(v.a)(k,2),C=w[0],A=w[1];Object(a.useEffect)((function(){U("useEffect");var e=n.params.id||"",t=null===o||void 0===o?void 0:o.find((function(t){return t.id===e}));A(t),t&&(d(t.text),y(t.date),O(t.num),T(t.bool))}),[n.params.id,o]);return U("render"),r.a.createElement(l.r,null,r.a.createElement(l.k,null,r.a.createElement(l.x,null,r.a.createElement(l.w,null,"Edit Item"),r.a.createElement(l.c,{slot:"end"},r.a.createElement(l.b,{onClick:function(){return t.goBack()}},"Back"),r.a.createElement(l.b,{onClick:function(){var e=C?Object(h.a)(Object(h.a)({},C),{},{text:E,date:j,num:_,bool:x}):{text:E,date:j,num:_,bool:x};s&&s(e).then((function(){return t.goBack()}))}},"Save")))),r.a.createElement(l.h,null,r.a.createElement(l.d,null,r.a.createElement(l.f,null,r.a.createElement(l.g,null,"Edit class")),r.a.createElement(l.e,null,r.a.createElement(l.n,null,r.a.createElement(l.o,null,"ID:  "),r.a.createElement(l.m,{hidden:void 0===C,placeholder:"id",value:n.params.id,readonly:!0})),r.a.createElement(l.n,null,r.a.createElement(l.o,null,"Date"),r.a.createElement(l.h,{class:"ion-text-right"}),r.a.createElement(l.u,{placeholder:"Select date",value:j,onIonChange:function(e){return y(e.detail.value||"")}},r.a.createElement(l.v,{value:"2021-11-10"},"2021-11-10"),r.a.createElement(l.v,{value:"2021-12-10"},"2021-12-10")),i&&r.a.createElement("div",null,i.message||"Failed to save class")),r.a.createElement(l.n,null,r.a.createElement(l.o,null,"Num"),r.a.createElement(l.h,{class:"ion-text-right"}),r.a.createElement(l.m,{placeholder:"Set num",value:_,onIonChange:function(e){return O(e.detail.value||"")}}),i&&r.a.createElement("div",null,i.message||"Failed to save class")),r.a.createElement(l.n,null,r.a.createElement(l.o,null,"Bool"),r.a.createElement(l.h,{class:"ion-text-right"}),r.a.createElement(l.u,{placeholder:"Select bool",value:x,onIonChange:function(e){return T(e.detail.value||"")}},r.a.createElement(l.v,{value:"True"},"True"),r.a.createElement(l.v,{value:"False"},"False")),i&&r.a.createElement("div",null,i.message||"Failed to save class"))))))},L=(n(95),n(96),n(97),n(98),n(99),n(100),n(101),n(102),n(103),n(104),n(105),function(){return r.a.createElement(l.a,null,r.a.createElement(A,null,r.a.createElement(s.a,null,r.a.createElement(l.t,null,r.a.createElement(i.b,{path:"/items",component:M,exact:!0}),r.a.createElement(i.b,{path:"/item",component:B,exact:!0}),r.a.createElement(i.b,{path:"/item/:id",component:B,exact:!0}),r.a.createElement(i.b,{exact:!0,path:"/",render:function(){return r.a.createElement(i.a,{to:"/items"})}})))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},66:function(e,t,n){e.exports=n(106)},72:function(e,t,n){var a={"./ion-action-sheet.entry.js":[108,5],"./ion-alert.entry.js":[109,6],"./ion-app_8.entry.js":[110,7],"./ion-avatar_3.entry.js":[111,18],"./ion-back-button.entry.js":[112,19],"./ion-backdrop.entry.js":[113,43],"./ion-button_2.entry.js":[114,20],"./ion-card_5.entry.js":[115,21],"./ion-checkbox.entry.js":[116,22],"./ion-chip.entry.js":[117,23],"./ion-col_3.entry.js":[118,44],"./ion-datetime_3.entry.js":[119,10],"./ion-fab_3.entry.js":[120,24],"./ion-img.entry.js":[121,45],"./ion-infinite-scroll_2.entry.js":[122,46],"./ion-input.entry.js":[123,25],"./ion-item-option_3.entry.js":[124,26],"./ion-item_8.entry.js":[125,27],"./ion-loading.entry.js":[126,28],"./ion-menu_3.entry.js":[127,29],"./ion-modal.entry.js":[128,8],"./ion-nav_2.entry.js":[129,15],"./ion-popover.entry.js":[130,9],"./ion-progress-bar.entry.js":[131,30],"./ion-radio_2.entry.js":[132,31],"./ion-range.entry.js":[133,32],"./ion-refresher_2.entry.js":[134,11],"./ion-reorder_2.entry.js":[135,17],"./ion-ripple-effect.entry.js":[136,47],"./ion-route_4.entry.js":[137,33],"./ion-searchbar.entry.js":[138,34],"./ion-segment_2.entry.js":[139,35],"./ion-select_3.entry.js":[140,36],"./ion-slide_2.entry.js":[141,48],"./ion-spinner.entry.js":[142,13],"./ion-split-pane.entry.js":[143,49],"./ion-tab-bar_2.entry.js":[144,37],"./ion-tab_2.entry.js":[145,16],"./ion-text.entry.js":[146,38],"./ion-textarea.entry.js":[147,39],"./ion-toast.entry.js":[148,40],"./ion-toggle.entry.js":[149,12],"./ion-virtual-scroll.entry.js":[150,50]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=72,e.exports=r},74:function(e,t,n){var a={"./ion-icon.entry.js":[154,57]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=74,e.exports=r}},[[66,3,4]]]);
//# sourceMappingURL=main.973a7003.chunk.js.map